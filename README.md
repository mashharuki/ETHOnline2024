# ETHOnline2024

![](./docs/img/cover_logo.png)

## Overview

## Live Demo

## Slide

[Canva - ETHOnline2024](https://www.canva.com/design/DAGOWBLt5O0/KkYpHYtHwohdZrdoIqInOg/edit?utm_content=DAGOWBLt5O0&utm_campaign=designshare&utm_medium=link2&utm_source=sharebutton)

## Product name

Mystic Decentral World

## Short description

It's an innovative idea for an Autonomous World (AW), where AI analyzes past transaction data, allowing multiple blockchains to interact and expand the game world in a decentralized and autonomous way.

## description

- ### 【Problem Definition】

  Technologies like Account Abstraction and meta-transactions have been developed to enhance UI/UX.

  Additionally, cross-chain protocols have emerged to enable interoperability between different chains.

  A significant portion of these transactions is concentrated in internal transactions.

  By analyzing these with AI, we believe it’s possible to offer users a more interactive and novel UX.

- ### 【Goal】

  Our goal is to create an Autonomous World (AW) where AI analyzes past transaction data, allowing multiple chains to interoperate and evolve autonomously.

  Imagine a game world similar to the Pokémon series, where each region represents a different chain, and each transaction generates new game elements.

  Specifically, when a user submits a transaction, it’s sent to Galadriel for AI analysis. Based on the results, new elements like monsters or items are generated as NFTs.

  Although this hasn’t been fully realized yet, we aim to use cross-chain protocols like LayerZero and CCIP to assign images and metadata generated by Galadriel to NFTs on other chains. We also envision future interactions where monsters on different chains can battle one another, further enhancing cross-chain interaction.

  Our ultimate goal is to create an AW where multiple chains interactively collaborate and autonomously expand the world.

- #### 【What We Built in This Hackathon】

  In this hackathon, we developed the following features:

  User-friendly authentication (powered by Web3Auth)

  Transaction analysis and metadata generation for

  monster NFTs using Galadriel
  Indexing of past transaction data using Envio

  Demonstration of monster NFT generation scripts across chains using CCIP and LayerZero

- ### 【Key Points】

  The most important aspect of our product is that we deployed AI analysis contracts and metadata generation contracts on Galadriel, aiming for a future where cross-chain interaction occurs through these protocols.

  We also focused on ensuring that all backend processes are fully handled within smart contracts, laying the foundation for a truly decentralized and autonomous AW.

  We made further improvements to Galadriel by deploying our own oracle contracts for enhanced usability.

- ### 【Future Expansion】

  In the future, we plan to expand Galadriel’s communication capabilities to support more chains.

  Additionally, we are considering adding security features, positioning it as a cross-chain data analysis tool.

## How it's made

## Related Contract Addresses

- ### Sepolia

  | Name         | Address                                    | Memo |
  | ------------ | ------------------------------------------ | ---- |
  | SourceMinter | 0xF6C348b8bd2de448CeC56277D6eFf851b6FfCa66 | CCIP |

- ### BaseSepolia

  | Name              | Address                                    | Memo |
  | ----------------- | ------------------------------------------ | ---- |
  | DestinationMinter | 0xb27E2b20054b9ce343eA51eEd335891d6D0831ca | CCIP |
  | MonsterNFT        | 0x02fc35AcD83AB0F7d802224B0A13f1462C2C05EA |      |
  |                   |                                            |      |

- ### Galadriel

  | Name       | Address                                    | Memo |
  | ---------- | ------------------------------------------ | ---- |
  | Agent      | 0xEf9310Ec551024585b1a290B286276B58d795EFc |      |
  | Analizer   | 0x8E25DDF6744f46e6BD2C021499E5a1A48312329D |      |
  | MonsterNFT | 0xdC00bE7034C949053713117bc6FA3F4897C9c033 |      |

## How to work

- **setup**

  install

  ```bash
  yarn
  ```

  - **backend**

    1.  create `pkgs/backend/.env` file

    2.  set some values

        ```txt
        PRIVATE_KEY=
        INFURA_API_KEY=
        ETHERSCAN_API_KEY=
        ROOTSTACK_API_KEY=
        GAS_REPORT=true
        COINMARKETCAP_API_KEY=
        ```

  - **frontend**

  - **scripts**

    1.  create `pkgs/scripts/.env` file

    2.  set some values

        ```txt
        CHAIN_ID=696969
        RPC_URL="https://devnet.galadriel.com/"
        PRIVATE_KEY=""

        CHAT_CONTRACT_ADDRESS="0x4A5e76a1aEa072BF32a71A61F52FC1f410AAd748"
        CHAT_VISION_CONTRACT_ADDRESS="0x785578B0dA5F21F8321590981E15F618BBc1915c"
        AGENT_CONTRACT_ADDRESS="0xFb09a7a940ae690Fafc59e18310c4deBF75B1B52"
        ANTROPIC_CONTRACT_ADDRESS="0x8cA1e115f96A562418968B475c1F096a8A385Ddb"
        SIMPLE_LLM_CONTRACT_ADDRESS="0xd09dFE5025FB25000aA22021F7355656cd10EB17"

        BICONOMY_API_KEY=""
        BICONOMY_BUNLDER_API_KEY=""

        # Base Sepolia
        NFT_ADDRESS="0x149920786500a12da84185df4b4aaabe975df5f8"

        # Chainlink CCIP
        SEPOLIA_RPC_URL="https://rpc.ankr.com/eth_sepolia"
        DESTINATION_MINTER_ADDRESS="0xA433938c78A781E1f6c79f7F8BE2C200cb6bC046"
        SOURCE_MINTER_ADDRESS="0x08c49b662c0c2A5D5f0560E01eE3c3fEdF8938d9"
        ```

- **frontend**

  - **build frontend**

    ```bash
    yarn frontend build
    ```

  - **start frontend**

    ```bash
    yarn frontend dev
    ```

  - **build frontend for blockless**

    ```bash
    yarn frontend build:bls
    ```

  - **preview frontend**

    ```bash
    yarn frontend preview:bls
    ```

  - **deploy frontend site to blockless**

    ```bash
    yarn frontend deploy:bls
    ```

- **backend**

  - **create contract addresses json file**

    please set --network option value

    ```bash
    yarn backend setup --network <network name>
    ```

  - **compile backend**

    ```bash
    yarn backend compile
    ```

  - **test backend**

    ```bash
    yarn backend test
    ```

  - **deploy backend**

    please set --network option value

    ```bash
    yarn backend deploy --network <network name>
    ```

  - **verify contract**

    ```bash
    yarn backend verify --contract contracts/tableland/TxDB.sol:TxDB <address> --network <network name>
    ```

  - **deploy Analizer**

    ```bash
    yarn backend deploy:Analizer --network galadrielDevnet
    ```

  - **deploy MonsterNFT**

    ```bash
    yarn backend deploy:MonsterNft --network <network name>
    ```

  - **mint Monster NFT Task**

    ```bash
    yarn backend mintMonsterNft --to 0x51908F598A5e0d8F1A3bAbFa6DF76F9704daD072 --network <network name>
    ```

  - **setParameters NFT Task**

    ```bash
    yarn backend setParameters --tokenid 0 --network <network name>
    ```

  - **setImage NFT Task**

    ```bash
    yarn backend setImage --tokenid 0 --image https://bafybeihrtum5eyu6w4f3xkdvyasvdr5sj23w6r4uk5alxo7by65zgfhlne.ipfs.w3s.link/logo.png --network <network name>
    ```

  - **getTokenURI of MonsterNFT**

    ```bash
    yarn backend getTokenURI --tokenid 0 --network <network name>
    ```

  - **galadriel-whitelist Task**

    ```bash
    yarn backend galadriel-whitelist --oracleaddress 0x68EC9556830AD097D661Df2557FBCeC166a0A075 --whitelistaddress 0x149920786500a12dA84185df4B4aAABe975Df5f8  --network galadrielDevnet
    ```

  - **galadriel-analyze Task**

    ```bash
    yarn backend galadriel-analyze --message "0x0000189a000000000000000000000000f09e7827a72aeacc8ff7e7f8a1368f697a698e9300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002440d097c3000000000000000000000000a5cc3c03994db5b0d9a5eedd10cabab0813678ac00000000000000000000000000000000000000000000000000000000" --network galadrielDevnet
    ```

  - **TableLand**

    - **setAccessControl task**

      ```bash
      yarn backend setAccessControl --network <network name>
      ```

    - **insertData task**

      ```bash
      yarn backend insertData --network <network name>
      ```

  - **Chainlink CCIP**

    - **deploy NFT & destination Contract**

      ```bash
      yarn backend deploy-destination-cross-chain-nft-minter --network baseSepolia
      ```

    - **deploy SourceMinter contract**

      ```bash
      yarn backend deploy-source-cross-chain-nft-minter --network sepolia
      ```

      & you should send LINK token to SourceMinter Contract

    - **mint CrossChainNFT**

      ```bash
      yarn backend crossChainMint --destination baseSepolia --to 0x51908F598A5e0d8F1A3bAbFa6DF76F9704daD072 --fee LINK --network sepolia
      ```

      [CrossChain Mint NFT Tx](https://ccip.chain.link/msg/0x1f389be6f625b0ed688d97c8e1ea68e74e4081aa663691269bda79b643f51172)

      [Rarible Minted NFT](https://testnet.rarible.com/token/base/0x149920786500a12da84185df4b4aaabe975df5f8:0)

    - **crossChain SetParameters**

      ```bash
      yarn backend crossChainSetParameters --destination baseSepolia --tokenid 0 --fee LINK --network sepolia
      ```

    - **crossChain setImage**

      ```bash
      yarn backend crossChainSetImage --destination baseSepolia --image https://bafybeihrtum5eyu6w4f3xkdvyasvdr5sj23w6r4uk5alxo7by65zgfhlne.ipfs.w3s.link/logo.png --tokenid 0  --fee LINK --network sepolia
      ```

- **scripts**

  - **generate NFT Image**

    ```bash
    yarn scripts generateImgAgent
    ```

    [https://storage.googleapis.com/galadriel-assets/2e996b07-b391-4eef-a6dd-5baec84f4f6a.png](https://storage.googleapis.com/galadriel-assets/2e996b07-b391-4eef-a6dd-5baec84f4f6a.png)

- **indexer (Envio)**

  [deployed indexer]()

  Please run in `indexer` folder

  - **install**

    ```bash
    pnpm install
    ```

  - **codegen & build**

    ```bash
    pnpm codegen && pnpm build
    ```

  - **push**

    ```bash
    git checkout -b envio && git push
    ```

## Sample NFT's metadata URI

[here](https://bafybeicfsjwjtdlt67nkfoxsma4cyl4zsjjyqtn27rgnpno5gr2zd5yf34.ipfs.w3s.link/sample)

### reference

1. [ERH Online2024](https://ethglobal.com/events/ethonline2024)
2. [Hedera Dev Protal](https://portal.hedera.com/login)
3. [Hedera Getting Started](https://hedera.com/getting-started)
4. [Hedera Hardhat Template Project](https://github.com/hashgraph/hedera-hardhat-example-project/blob/main/.env.example)
5. [rootstock-hardhat-starterkit Template Kit](https://github.com/rsksmart/rootstock-hardhat-starterkit)
6. [rootstock hardhat set config](https://dev.rootstock.io/developers/smart-contracts/hardhat/configure-hardhat-rootstock/)
7. [rootstock dev portal](https://rpc.rootstock.io/)
8. [rootstock faucet](https://faucet.rootstock.io/)
9. [Galadriel DevNet explorer](https://explorer.galadriel.com)
10. [Chiliz RPC Endpoint info](https://docs.chiliz.com/develop/basics/connect-to-chiliz-chain/connect-using-rpc)
11. [SSV Network - Faucet](https://faucet.ssv.network/)
12. [Morph hardhat template repo](https://github.com/varun-doshi/morph-examples/tree/main/contract-deployment-demos/hardhat-demo)
13. [Blog- how to build sample app on Morph ](https://blog.morphl2.io/developer-guide-building-a-decentralized-hotel-booking-system-on-morph-2/)
14. [Morph - faucet site](https://morph-token-faucet.vercel.app/)
15. [Morph Bridge site holesky - Morph](https://bridge-holesky.morphl2.io/)
16. [Morph BlockExplorer](https://explorer-holesky.morphl2.io/address/0x51908F598A5e0d8F1A3bAbFa6DF76F9704daD072)
17. [Galadriel HP](https://teeml.galadriel.com/)
18. [Galadriel Devnet Explorer](https://explorer.galadriel.com/address/0x68EC9556830AD097D661Df2557FBCeC166a0A075)
19. [GitHub - Galadriel sample contract](https://github.com/galadriel-ai/contracts/tree/main)
20. [Galadriel Docs Calling an LLM: simple](https://docs.galadriel.com/tutorials/simple_llm)
21. [Eth2Vec: 深層学習による言語処理に基づいたスマートコントラクトの安全性解析ツールの設計](https://cir.nii.ac.jp/crid/1050855522064873472)
22. [GitHub - Eth2Vec](https://github.com/fseclab-osaka/eth2vec)
23. [TableLand Studio](https://studio.tableland.xyz/)
24. [Chainlink CCIP Supported Testnet Networks](https://docs.chain.link/ccip/supported-networks/v1_2_0/testnet)
25. [Chainlink CCIP Sepolia info](https://docs.chain.link/ccip/supported-networks/v1_2_0/testnet#ethereum-sepolia)
26. [Chainlink CCIP CrossChainGuide](https://github.com/smartcontractkit/ccip-starter-kit-hardhat/blob/main/README.md#example-7---execute-received-message-as-a-function-call)
27. [Chainlink CCIP Explorer](https://ccip.chain.link/)
28. [Kinto Wallet SDK](https://docs.kinto.xyz/kinto-the-safe-l2/building-on-kinto/kinto-wallet-web-sdk)
29. [GitHub - Kinto Wallet SDK](https://github.com/KintoXYZ/kinto-web-sdk)
30. [GitHub - Kinto Wallet SDK Sample](https://github.com/KintoXYZ/react-sdk-sample)
31. [jiffyscan](https://jiffyscan.xyz/?network=mainnet)
32. [Medium - 💻 Kinto launches Wallet SDK](https://medium.com/mamori-finance/kinto-launches-the-wallet-sdk-239a88265f17)
33. [HederaScan - Testnet](https://hashscan.io/testnet/dashboard?p2=1&k2=1725160501.286348003&p3=1&k3=1725148802.532220003&p1=1&k1=1725160501.170967003)
34. [BlockHead](https://blockhead.info/apps)
35. [Web3Auth - Examples](https://web3auth.io/docs/examples?product=Core+Kit&sdk=Single+Factor+Auth+Web+SDK)
36. [pnp-modal-playground.vercel.app](https://pnp-modal-playground.vercel.app/)
37. [Web3Auth pnp-modal-playground Samplecode](https://github.com/Web3Auth/web3auth-pnp-examples/tree/main/web-modal-sdk/react-modal-playground)
38. [Decoding EntryPoint code line by line](https://www.biconomy.io/post/decoding-entrypoint-and-useroperation-with-erc-4337-part2)
39. [GitHub - galadriel-ai/teeML](https://github.com/galadriel-ai/teeML)
40. [Galadriel Docs - AI Agents](https://docs.galadriel.com/tutorials/agents)
41. [GitHub - MyENSDApp Domains.sol](https://github.com/mashharuki/MyENSDApp/blob/main/backend/contracts/Domains.sol)
